<ux-icon name="search"></ux-icon>

@if (searching === true) {
  <div class="nav-bar-search-container" (click)="$event.stopPropagation()">
    <input
      #searchInput
      type="text"
      class="nav-bar-search-input"
      [ngModel]="query | async"
      (ngModelChange)="query.next($event)"
      (blur)="hideSearch()"
      (keydown.escape)="escapeKey()"
      (keydown.arrowup)="upKey($event)"
      (keydown.arrowdown)="downKey($event)"
      (keydown.enter)="enterKey()"
    />
    <ul class="nav-bar-search-results-container">
      @for (result of results; track result; let idx = $index) {
        <li
          class="nav-bar-search-result"
          [class.active]="activeIdx === idx"
          (mousedown)="navigate(result)"
        >
          {{ result.link.title }}
          @if (isDuplicate(result)) {
            <span class="nav-bar-search-result-section">({{ result.section }})</span>
          }
        </li>
      }
    </ul>
  </div>
}
