<div class="tree-view-example-container">

    <tree-root #tree
            role="tree"
            [nodes]="nodes"
            [options]="options"
            (focus)="focused = $event.node"
            (loadNodeChildren)="onChildrenLoaded($event.node)">

        <ng-template #treeNodeFullTemplate let-node let-index="index" let-templates="templates">

            <div class="tree-node">

                <div class="node-wrapper">

                    <ux-checkbox 
                        [tabindex]="-1"
                        [value]="node.data.checked"
                        (valueChange)="setChecked(node, $event)"
                        [indeterminateValue]="-1">
                    </ux-checkbox>

                    <tree-node-expander [node]="node"></tree-node-expander>

                    <div class="node-content-wrapper"
                         [class.node-content-wrapper-active]="node.data.checked"
                         [class.node-content-wrapper-focused]="node.data.checked || node.isFocused"
                         role="treeitem"
                         [attr.aria-checked]="node.data.checked"
                         [attr.aria-expanded]="node.isExpanded"
                         [tabindex]="node === focused || !focused && node.isRoot ? 0 : -1"
                         (focus)="focus(node)"
                         (click)="setChecked(node, !node.data.checked)">

                        <span class="hpe-icon"
                              [class.hpe-folder]="node.hasChildren && !node.isExpanded"
                              [class.hpe-folder-open]="node.hasChildren && node.isExpanded"
                              [class.hpe-document]="!node.hasChildren">
                        </span>

                        <span [class.title]="true">{{ node.data.name }}</span>

                    </div>

                </div>

                <tree-node-children role="group" [node]="node" [templates]="templates"></tree-node-children>
            </div>

        </ng-template>

        <ng-template #loadingTemplate>
            <div class="spinner spinner-accent spinner-bounce-middle"></div>
        </ng-template>
    </tree-root>

</div>

<hr>

<button class="btn button-primary" (click)="tree.treeModel.expandAll()">Expand All Nodes</button>
<button class="btn button-primary" (click)="tree.treeModel.collapseAll()">Collapse All Nodes</button>