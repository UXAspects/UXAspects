<tr class="p-l-lg" uxHoverActionContainer>
    <td>
        <ux-select
            [value]="selectedLogicalOperator"
            (valueChange)="handleSelectedOperatorChange($event)"
            [readonlyInput]="true"
            [options]="logicalOperators"
            [display]="'label'"
            [key]="'name'">
        </ux-select>
    </td>
    <td>
        <button
            uxHoverAction
            (click)="deleteGroup()"
            type="button"
            class="btn btn-link btn-icon btn-lg button-secondary"
            aria-label="Delete condition">
            <span class="ux-icon ux-icon-trash text-error" aria-hidden="true"></span>
        </button>
    </td>
</tr>

<ng-container *ngFor="let child of subExpression?.children; index as index">
    <ux-leb-condition
        *ngIf="child.type === 'condition'"
        (conditionChange)="handleGroupChange($event, index)"
        [condition]="child"
        [id]="index"
        (conditionDeleted)="removeConditionAtIndex($event)">
    </ux-leb-condition>

    <ux-leb-group
        *ngIf="child.type === 'group'"
        [subExpression]="child"
        (groupChange)="handleGroupChange($event, index)"
        [logicalOperatorName]="child.logicalOperator">
    </ux-leb-group>
</ng-container>

<tr class="p-l-lg">
    <td>
        <button
            [uxMenuTriggerFor]="addMenu"
            type="button"
            class="btn btn-icon button-primary"
            aria-label="Add">
            <span class="ux-icon ux-icon-add" aria-hidden="true"></span>
        </button>
    </td>
</tr>

<ux-menu #addMenu>
    <button type="button" uxMenuItem (click)="addCondition()">
        <span class="dropdown-menu-text">Add condition</span>
    </button>

    <button type="button" uxMenuItem (click)="addGroup()">
        <span class="dropdown-menu-text">Add logical operator</span>
    </button>
</ux-menu>
