(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[2746],{57195:m=>{m.exports={snippet:'<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file-upload-demo<span class="token punctuation">"</span></span>\n    <span class="token attr-name">uxFocusIndicator</span>\n    <span class="token attr-name">tabindex</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span>\n    <span class="token attr-name">ng2FileDrop</span>\n    <span class="token attr-name">[class.file-upload-dropping]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fileOver<span class="token punctuation">"</span></span>\n    <span class="token attr-name">(fileOver)</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fileOver = $event<span class="token punctuation">"</span></span>\n    <span class="token attr-name">[uploader]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>uploader<span class="token punctuation">"</span></span>\n    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file-upload-dropzone<span class="token punctuation">"</span></span>\n    <span class="token attr-name">(keydown.enter)</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>upload.click()<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    Click here or Drag and Drop to upload files\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">#upload</span>\n    <span class="token attr-name">tabindex</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>-1<span class="token punctuation">"</span></span>\n    <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span>\n    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file-upload-demo<span class="token punctuation">"</span></span>\n    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sr-only<span class="token punctuation">"</span></span>\n    <span class="token attr-name">ng2FileSelect</span>\n    <span class="token attr-name">[uploader]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>uploader<span class="token punctuation">"</span></span>\n    <span class="token attr-name">multiple</span><span class="token punctuation">></span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ux-progress-bar</span> <span class="token attr-name">aria-label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Upload progress<span class="token punctuation">"</span></span>\n    <span class="token attr-name">[value]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>uploader.progress ? uploader.progress : 0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ux-progress-bar</span><span class="token punctuation">></span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file-upload-progress-indicator<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ uploader.progress ? uploader.progress : 0 }}%<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">uxTabbableList</span> <span class="token attr-name">direction</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>horizontal<span class="token punctuation">"</span></span> <span class="token attr-name">*ngIf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>uploader.queue.length<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file-upload-queue<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">*ngFor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>let item of uploader.queue<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">#file</span> <span class="token attr-name">uxTabbableListItem</span> <span class="token attr-name">[attr.aria-label]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.file.name<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>{{ item.file.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">uxFocusIndicator</span>\n                <span class="token attr-name">[tabIndex]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file.tabIndex<span class="token punctuation">"</span></span>\n                <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file-upload-queue-remove<span class="token punctuation">"</span></span>\n                <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span>\n                <span class="token attr-name">(click)</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.remove()<span class="token punctuation">"</span></span>\n                <span class="token attr-name">aria-label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Remove file<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ux-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>close<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ux-icon</span><span class="token punctuation">></span></span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn button-primary<span class="token punctuation">"</span></span> <span class="token attr-name">(click)</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>uploader.uploadAll()<span class="token punctuation">"</span></span>\n        <span class="token attr-name">[disabled]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!uploader.getNotUploadedItems().length<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        Upload All\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>\n\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn button-secondary<span class="token punctuation">"</span></span> <span class="token attr-name">(click)</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>uploader.cancelAll()<span class="token punctuation">"</span></span>\n        <span class="token attr-name">[disabled]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!uploader.isUploading<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        Cancel All\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>\n\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>btn button-secondary<span class="token punctuation">"</span></span> <span class="token attr-name">(click)</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>uploader.clearQueue()<span class="token punctuation">"</span></span>\n        <span class="token attr-name">[disabled]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!uploader.queue.length<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        Clear All\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n',example:'<label for="file-upload-demo"\n    uxFocusIndicator\n    tabindex="0"\n    ng2FileDrop\n    [class.file-upload-dropping]="fileOver"\n    (fileOver)="fileOver = $event"\n    [uploader]="uploader"\n    class="file-upload-dropzone"\n    (keydown.enter)="upload.click()">\n    Click here or Drag and Drop to upload files\n</label>\n\n<input #upload\n    tabindex="-1"\n    type="file"\n    id="file-upload-demo"\n    class="sr-only"\n    ng2FileSelect\n    [uploader]="uploader"\n    multiple>\n\n<ux-progress-bar aria-label="Upload progress"\n    [value]="uploader.progress ? uploader.progress : 0">\n</ux-progress-bar>\n\n<p class="file-upload-progress-indicator">{{ uploader.progress ? uploader.progress : 0 }}%</p>\n\n<ul uxTabbableList direction="horizontal" *ngIf="uploader.queue.length" class="file-upload-queue">\n    <li *ngFor="let item of uploader.queue">\n        <a #file uxTabbableListItem [attr.aria-label]="item.file.name">\n            <span>{{ item.file.name }}</span>\n            <button uxFocusIndicator\n                [tabIndex]="file.tabIndex"\n                class="file-upload-queue-remove"\n                type="button"\n                (click)="item.remove()"\n                aria-label="Remove file">\n                <ux-icon name="close"></ux-icon>\n            </button>\n        </a>\n    </li>\n</ul>\n\n<div class="btn-container">\n\n    <button type="button" class="btn button-primary" (click)="uploader.uploadAll()"\n        [disabled]="!uploader.getNotUploadedItems().length">\n        Upload All\n    </button>\n\n    <button type="button" class="btn button-secondary" (click)="uploader.cancelAll()"\n        [disabled]="!uploader.isUploading">\n        Cancel All\n    </button>\n\n    <button type="button" class="btn button-secondary" (click)="uploader.clearQueue()"\n        [disabled]="!uploader.queue.length">\n        Clear All\n    </button>\n\n</div>\n'}},78754:m=>{m.exports={snippet:'<span class="token keyword">import</span> <span class="token punctuation">{</span> LiveAnnouncer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'@angular/cdk/a11y\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'@angular/core\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> FileUploader <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'ng2-file-upload\'</span><span class="token punctuation">;</span>\n\n@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    selector<span class="token operator">:</span> <span class="token string">\'app-root\'</span><span class="token punctuation">,</span>\n    templateUrl<span class="token operator">:</span> <span class="token string">\'./app.component.html\'</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AppComponent</span> <span class="token punctuation">{</span>\n    fileOver<span class="token operator">:</span> boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>\n    uploader<span class="token operator">:</span> FileUploader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileUploader</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">announcer<span class="token operator">:</span> LiveAnnouncer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>uploader<span class="token punctuation">.</span><span class="token function-variable function">onCompleteAll</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> announcer<span class="token punctuation">.</span><span class="token function">announce</span><span class="token punctuation">(</span><span class="token string">\'All files have been uploaded.\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n',example:"import { LiveAnnouncer } from '@angular/cdk/a11y';\nimport { Component } from '@angular/core';\nimport { FileUploader } from 'ng2-file-upload';\n\n@Component({\n    selector: 'app-root',\n    templateUrl: './app.component.html'\n})\nexport class AppComponent {\n    fileOver: boolean = false;\n    uploader: FileUploader = new FileUploader({});\n\n    constructor(announcer: LiveAnnouncer) {\n        this.uploader.onCompleteAll = () => announcer.announce('All files have been uploaded.');\n    }\n}\n"}},66760:(m,v,l)=>{var f={"./app.html":57195,"./app.ts":78754,"docs/app/pages/components/components-sections/file-upload/file-upload/snippets/app.html":57195,"docs/app/pages/components/components-sections/file-upload/file-upload/snippets/app.ts":78754};function c(r){var a=g(r);return l(a)}function g(r){if(!l.o(f,r)){var a=new Error("Cannot find module '"+r+"'");throw a.code="MODULE_NOT_FOUND",a}return f[r]}c.keys=function(){return Object.keys(f)},c.resolve=g,m.exports=c,c.id=66760},62746:(m,v,l)=>{"use strict";l.r(v),l.d(v,{ComponentsFileUploadModule:()=>Y});var f=l(47497),c=l(86019),g=l(36593),r=l(86132),a=l(9619);class b{constructor(n){this.rawFile=n;let t=(p=n)&&(p.nodeName||p.prop&&p.attr&&p.find)?n.value:n;var p;this["_createFrom"+("string"==typeof t?"FakePath":"Object")](t)}_createFromFakePath(n){this.lastModifiedDate=void 0,this.size=void 0,this.type="like/"+n.slice(n.lastIndexOf(".")+1).toLowerCase(),this.name=n.slice(n.lastIndexOf("/")+n.lastIndexOf("\\")+2)}_createFromObject(n){this.size=n.size,this.type=n.type,this.name=n.name}}class _{constructor(n,s,t){this.url="/",this.headers=[],this.withCredentials=!0,this.formData=[],this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.index=void 0,this.uploader=n,this.some=s,this.options=t,this.file=new b(s),this._file=s,n.options&&(this.method=n.options.method||"POST",this.alias=n.options.itemAlias||"file"),this.url=n.options.url}upload(){try{this.uploader.uploadItem(this)}catch(n){this.uploader._onCompleteItem(this,"",0,{}),this.uploader._onErrorItem(this,"",0,{})}}cancel(){this.uploader.cancelItem(this)}remove(){this.uploader.removeFromQueue(this)}onBeforeUpload(){}onBuildForm(n){return{form:n}}onProgress(n){return{progress:n}}onSuccess(n,s,t){return{response:n,status:s,headers:t}}onError(n,s,t){return{response:n,status:s,headers:t}}onCancel(n,s,t){return{response:n,status:s,headers:t}}onComplete(n,s,t){return{response:n,status:s,headers:t}}_onBeforeUpload(){this.isReady=!0,this.isUploading=!0,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.onBeforeUpload()}_onBuildForm(n){this.onBuildForm(n)}_onProgress(n){this.progress=n,this.onProgress(n)}_onSuccess(n,s,t){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!0,this.isCancel=!1,this.isError=!1,this.progress=100,this.index=void 0,this.onSuccess(n,s,t)}_onError(n,s,t){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!1,this.isCancel=!1,this.isError=!0,this.progress=0,this.index=void 0,this.onError(n,s,t)}_onCancel(n,s,t){this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!0,this.isError=!1,this.progress=0,this.index=void 0,this.onCancel(n,s,t)}_onComplete(n,s,t){this.onComplete(n,s,t),this.uploader.options.removeAfterUpload&&this.remove()}_prepareToUploading(){this.index=this.index||++this.uploader._nextIndex,this.isReady=!0}}let U=(()=>{class p{static getMimeClass(s){let t="application";return-1!==this.mime_psd.indexOf(s.type)||s.type.match("image.*")?t="image":s.type.match("video.*")?t="video":s.type.match("audio.*")?t="audio":"application/pdf"===s.type?t="pdf":-1!==this.mime_compress.indexOf(s.type)?t="compress":-1!==this.mime_doc.indexOf(s.type)?t="doc":-1!==this.mime_xsl.indexOf(s.type)?t="xls":-1!==this.mime_ppt.indexOf(s.type)&&(t="ppt"),"application"===t&&(t=this.fileTypeDetection(s.name)),t}static fileTypeDetection(s){let t={jpg:"image",jpeg:"image",tif:"image",psd:"image",bmp:"image",png:"image",nef:"image",tiff:"image",cr2:"image",dwg:"image",cdr:"image",ai:"image",indd:"image",pin:"image",cdp:"image",skp:"image",stp:"image","3dm":"image",mp3:"audio",wav:"audio",wma:"audio",mod:"audio",m4a:"audio",compress:"compress",zip:"compress",rar:"compress","7z":"compress",lz:"compress",z01:"compress",bz2:"compress",gz:"compress",pdf:"pdf",xls:"xls",xlsx:"xls",ods:"xls",mp4:"video",avi:"video",wmv:"video",mpg:"video",mts:"video",flv:"video","3gp":"video",vob:"video",m4v:"video",mpeg:"video",m2ts:"video",mov:"video",doc:"doc",docx:"doc",eps:"doc",txt:"doc",odt:"doc",rtf:"doc",ppt:"ppt",pptx:"ppt",pps:"ppt",ppsx:"ppt",odp:"ppt"},e=s.split(".");if(e.length<2)return"application";let o=e[e.length-1].toLowerCase();return void 0===t[o]?"application":t[o]}}return p.mime_doc=["application/msword","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-word.document.macroEnabled.12","application/vnd.ms-word.template.macroEnabled.12"],p.mime_xsl=["application/vnd.ms-excel","application/vnd.ms-excel","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.ms-excel.template.macroEnabled.12","application/vnd.ms-excel.addin.macroEnabled.12","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],p.mime_ppt=["application/vnd.ms-powerpoint","application/vnd.ms-powerpoint","application/vnd.ms-powerpoint","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/vnd.ms-powerpoint.addin.macroEnabled.12","application/vnd.ms-powerpoint.presentation.macroEnabled.12","application/vnd.ms-powerpoint.presentation.macroEnabled.12","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],p.mime_psd=["image/photoshop","image/x-photoshop","image/psd","application/photoshop","application/psd","zz-application/zz-winassoc-psd"],p.mime_compress=["application/x-gtar","application/x-gcompress","application/compress","application/x-tar","application/x-rar-compressed","application/octet-stream","application/x-zip-compressed","application/zip-compressed","application/x-7z-compressed","application/gzip","application/x-bzip2"],p})();class C{constructor(n){this.isUploading=!1,this.queue=[],this.progress=0,this._nextIndex=0,this.options={autoUpload:!1,isHTML5:!0,filters:[],removeAfterUpload:!1,disableMultipart:!1,formatDataFunction:s=>s._file,formatDataFunctionIsAsync:!1},this.setOptions(n),this.response=new a.vpe}setOptions(n){this.options=Object.assign(this.options,n),this.authToken=this.options.authToken,this.authTokenHeader=this.options.authTokenHeader||"Authorization",this.autoUpload=this.options.autoUpload,this.options.filters.unshift({name:"queueLimit",fn:this._queueLimitFilter}),this.options.maxFileSize&&this.options.filters.unshift({name:"fileSize",fn:this._fileSizeFilter}),this.options.allowedFileType&&this.options.filters.unshift({name:"fileType",fn:this._fileTypeFilter}),this.options.allowedMimeType&&this.options.filters.unshift({name:"mimeType",fn:this._mimeTypeFilter});for(let s=0;s<this.queue.length;s++)this.queue[s].url=this.options.url}addToQueue(n,s,t){let e=[];for(let k of n)e.push(k);let o=this._getFilters(t),i=this.queue.length,u=[];e.map(k=>{s||(s=this.options);let x=new b(k);if(this._isValidFile(x,o,s)){let h=new _(this,k,s);u.push(h),this.queue.push(h),this._onAfterAddingFile(h)}else this._onWhenAddingFileFailed(x,o[this._failFilterIndex],s)}),this.queue.length!==i&&(this._onAfterAddingAll(u),this.progress=this._getTotalProgress()),this._render(),this.options.autoUpload&&this.uploadAll()}removeFromQueue(n){let s=this.getIndexOfItem(n),t=this.queue[s];t.isUploading&&t.cancel(),this.queue.splice(s,1),this.progress=this._getTotalProgress()}clearQueue(){for(;this.queue.length;)this.queue[0].remove();this.progress=0}uploadItem(n){let s=this.getIndexOfItem(n),t=this.queue[s],e=this.options.isHTML5?"_xhrTransport":"_iframeTransport";t._prepareToUploading(),!this.isUploading&&(this.isUploading=!0,this[e](t))}cancelItem(n){let s=this.getIndexOfItem(n),t=this.queue[s];t&&t.isUploading&&(this.options.isHTML5?t._xhr:t._form).abort()}uploadAll(){let n=this.getNotUploadedItems().filter(s=>!s.isUploading);!n.length||(n.map(s=>s._prepareToUploading()),n[0].upload())}cancelAll(){this.getNotUploadedItems().map(s=>s.cancel())}isFile(n){return File&&n instanceof File}isFileLikeObject(n){return n instanceof b}getIndexOfItem(n){return"number"==typeof n?n:this.queue.indexOf(n)}getNotUploadedItems(){return this.queue.filter(n=>!n.isUploaded)}getReadyItems(){return this.queue.filter(n=>n.isReady&&!n.isUploading).sort((n,s)=>n.index-s.index)}destroy(){}onAfterAddingAll(n){return{fileItems:n}}onBuildItemForm(n,s){return{fileItem:n,form:s}}onAfterAddingFile(n){return{fileItem:n}}onWhenAddingFileFailed(n,s,t){return{item:n,filter:s,options:t}}onBeforeUploadItem(n){return{fileItem:n}}onProgressItem(n,s){return{fileItem:n,progress:s}}onProgressAll(n){return{progress:n}}onSuccessItem(n,s,t,e){return{item:n,response:s,status:t,headers:e}}onErrorItem(n,s,t,e){return{item:n,response:s,status:t,headers:e}}onCancelItem(n,s,t,e){return{item:n,response:s,status:t,headers:e}}onCompleteItem(n,s,t,e){return{item:n,response:s,status:t,headers:e}}onCompleteAll(){}_mimeTypeFilter(n){return!(this.options.allowedMimeType&&-1===this.options.allowedMimeType.indexOf(n.type))}_fileSizeFilter(n){return!(this.options.maxFileSize&&n.size>this.options.maxFileSize)}_fileTypeFilter(n){return!(this.options.allowedFileType&&-1===this.options.allowedFileType.indexOf(U.getMimeClass(n)))}_onErrorItem(n,s,t,e){n._onError(s,t,e),this.onErrorItem(n,s,t,e)}_onCompleteItem(n,s,t,e){n._onComplete(s,t,e),this.onCompleteItem(n,s,t,e);let o=this.getReadyItems()[0];this.isUploading=!1,o?o.upload():(this.onCompleteAll(),this.progress=this._getTotalProgress(),this._render())}_headersGetter(n){return s=>s?n[s.toLowerCase()]||void 0:n}_xhrTransport(n){let e,s=this,t=n._xhr=new XMLHttpRequest;if(this._onBeforeUploadItem(n),"number"!=typeof n._file.size)throw new TypeError("The file specified is no longer valid");if(this.options.disableMultipart)e=this.options.formatDataFunction(n);else{e=new FormData,this._onBuildItemForm(n,e);const o=()=>e.append(n.alias,n._file,n.file.name);this.options.parametersBeforeFiles||o(),void 0!==this.options.additionalParameter&&Object.keys(this.options.additionalParameter).forEach(i=>{let u=this.options.additionalParameter[i];"string"==typeof u&&u.indexOf("{{file_name}}")>=0&&(u=u.replace("{{file_name}}",n.file.name)),e.append(i,u)}),this.options.parametersBeforeFiles&&o()}if(t.upload.onprogress=o=>{let i=Math.round(o.lengthComputable?100*o.loaded/o.total:0);this._onProgressItem(n,i)},t.onload=()=>{let o=this._parseHeaders(t.getAllResponseHeaders()),i=this._transformResponse(t.response,o);this["_on"+(this._isSuccessCode(t.status)?"Success":"Error")+"Item"](n,i,t.status,o),this._onCompleteItem(n,i,t.status,o)},t.onerror=()=>{let o=this._parseHeaders(t.getAllResponseHeaders()),i=this._transformResponse(t.response,o);this._onErrorItem(n,i,t.status,o),this._onCompleteItem(n,i,t.status,o)},t.onabort=()=>{let o=this._parseHeaders(t.getAllResponseHeaders()),i=this._transformResponse(t.response,o);this._onCancelItem(n,i,t.status,o),this._onCompleteItem(n,i,t.status,o)},t.open(n.method,n.url,!0),t.withCredentials=n.withCredentials,this.options.headers)for(let o of this.options.headers)t.setRequestHeader(o.name,o.value);if(n.headers.length)for(let o of n.headers)t.setRequestHeader(o.name,o.value);this.authToken&&t.setRequestHeader(this.authTokenHeader,this.authToken),t.onreadystatechange=function(){t.readyState==XMLHttpRequest.DONE&&s.response.emit(t.responseText)},this.options.formatDataFunctionIsAsync?e.then(o=>t.send(JSON.stringify(o))):t.send(e),this._render()}_getTotalProgress(n=0){if(this.options.removeAfterUpload)return n;let s=this.getNotUploadedItems().length,e=100/this.queue.length;return Math.round((s?this.queue.length-s:this.queue.length)*e+n*e/100)}_getFilters(n){if(!n)return this.options.filters;if(Array.isArray(n))return n;if("string"==typeof n){let s=n.match(/[^\s,]+/g);return this.options.filters.filter(t=>-1!==s.indexOf(t.name))}return this.options.filters}_render(){}_queueLimitFilter(){return void 0===this.options.queueLimit||this.queue.length<this.options.queueLimit}_isValidFile(n,s,t){return this._failFilterIndex=-1,!s.length||s.every(e=>(this._failFilterIndex++,e.fn.call(this,n,t)))}_isSuccessCode(n){return n>=200&&n<300||304===n}_transformResponse(n,s){return n}_parseHeaders(n){let t,e,o,s={};return n&&n.split("\n").map(i=>{o=i.indexOf(":"),t=i.slice(0,o).trim().toLowerCase(),e=i.slice(o+1).trim(),t&&(s[t]=s[t]?s[t]+", "+e:e)}),s}_onWhenAddingFileFailed(n,s,t){this.onWhenAddingFileFailed(n,s,t)}_onAfterAddingFile(n){this.onAfterAddingFile(n)}_onAfterAddingAll(n){this.onAfterAddingAll(n)}_onBeforeUploadItem(n){n._onBeforeUpload(),this.onBeforeUploadItem(n)}_onBuildItemForm(n,s){n._onBuildForm(s),this.onBuildItemForm(n,s)}_onProgressItem(n,s){let t=this._getTotalProgress(s);this.progress=t,n._onProgress(s),this.onProgressItem(n,s),this.onProgressAll(t),this._render()}_onSuccessItem(n,s,t,e){n._onSuccess(s,t,e),this.onSuccessItem(n,s,t,e)}_onCancelItem(n,s,t,e){n._onCancel(s,t,e),this.onCancelItem(n,s,t,e)}}let T=(()=>{class p{constructor(s){this.onFileSelected=new a.vpe,this.element=s}getOptions(){return this.uploader.options}getFilters(){return{}}isEmptyAfterSelection(){return!!this.element.nativeElement.attributes.multiple}onChange(){let s=this.element.nativeElement.files,t=this.getOptions(),e=this.getFilters();this.uploader.addToQueue(s,t,e),this.onFileSelected.emit(s),this.isEmptyAfterSelection()&&(this.element.nativeElement.value="")}}return p.\u0275fac=function(s){return new(s||p)(a.Y36(a.SBq))},p.\u0275dir=a.lG2({type:p,selectors:[["","ng2FileSelect",""]],hostBindings:function(s,t){1&s&&a.NdJ("change",function(){return t.onChange()})},inputs:{uploader:"uploader"},outputs:{onFileSelected:"onFileSelected"}}),p})(),I=(()=>{class p{constructor(s){this.fileOver=new a.vpe,this.onFileDrop=new a.vpe,this.element=s}getOptions(){return this.uploader.options}getFilters(){return{}}onDrop(s){let t=this._getTransfer(s);if(!t)return;let e=this.getOptions(),o=this.getFilters();this._preventAndStop(s),this.uploader.addToQueue(t.files,e,o),this.fileOver.emit(!1),this.onFileDrop.emit(t.files)}onDragOver(s){let t=this._getTransfer(s);!this._haveFiles(t.types)||(t.dropEffect="copy",this._preventAndStop(s),this.fileOver.emit(!0))}onDragLeave(s){this.element&&s.currentTarget===this.element[0]||(this._preventAndStop(s),this.fileOver.emit(!1))}_getTransfer(s){return s.dataTransfer?s.dataTransfer:s.originalEvent.dataTransfer}_preventAndStop(s){s.preventDefault(),s.stopPropagation()}_haveFiles(s){return!!s&&(s.indexOf?-1!==s.indexOf("Files"):!!s.contains&&s.contains("Files"))}}return p.\u0275fac=function(s){return new(s||p)(a.Y36(a.SBq))},p.\u0275dir=a.lG2({type:p,selectors:[["","ng2FileDrop",""]],hostBindings:function(s,t){1&s&&a.NdJ("drop",function(o){return t.onDrop(o)})("dragover",function(o){return t.onDragOver(o)})("dragleave",function(o){return t.onDragLeave(o)})},inputs:{uploader:"uploader"},outputs:{fileOver:"fileOver",onFileDrop:"onFileDrop"}}),p})(),q=(()=>{class p{}return p.\u0275fac=function(s){return new(s||p)},p.\u0275mod=a.oAB({type:p}),p.\u0275inj=a.cJS({imports:[[c.ez]]}),p})();var O=l(4757),w=l(1610),F=l(56618),D=l(27920),Z=l(63756),S=l(58785),E=l(31415),M=l(92045),z=l(48574),H=l(50302),L=l(66091),B=l(37772),R=l(59372),N=l(50680),J=l(72006);function P(p,n){if(1&p){const s=a.EpF();a.TgZ(0,"li"),a.TgZ(1,"a",16,17),a.TgZ(3,"span"),a._uU(4),a.qZA(),a.TgZ(5,"button",18),a.NdJ("click",function(){return a.CHM(s).$implicit.remove()}),a._UZ(6,"ux-icon",19),a.qZA(),a.qZA(),a.qZA()}if(2&p){const s=n.$implicit,t=a.MAs(2);a.xp6(1),a.uIk("aria-label",s.file.name),a.xp6(3),a.Oqu(s.file.name),a.xp6(1),a.Q6J("tabIndex",t.tabIndex)}}function Q(p,n){if(1&p&&(a.TgZ(0,"ul",14),a.YNc(1,P,7,3,"li",15),a.qZA()),2&p){const s=a.oxw();a.xp6(1),a.Q6J("ngForOf",s.uploader.queue)}}let d=class extends Z.u{constructor(n){super(l(66760)),this.fileOver=!1,this.uploader=new C({}),this.playground={files:{"app.component.html":this.snippets.raw.appHtml,"app.component.ts":this.snippets.raw.appTs},modules:[{imports:["FileUploadModule"],library:"ng2-file-upload"},{imports:["ProgressBarModule"],library:"@ux-aspects/ux-aspects"},{imports:["A11yModule"],library:"@angular/cdk/a11y"}]},this.uploader.onCompleteAll=()=>n.announce("All files have been uploaded.")}};d.\u0275fac=function(n){return new(n||d)(a.Y36(f.Kd))},d.\u0275cmp=a.Xpm({type:d,selectors:[["uxd-components-file-upload"]],features:[a.qOj],decls:43,vars:13,consts:[["for","file-upload-demo","uxFocusIndicator","","tabindex","0","ng2FileDrop","",1,"file-upload-dropzone",3,"uploader","fileOver","keydown.enter"],["tabindex","-1","type","file","id","file-upload-demo","ng2FileSelect","","multiple","",1,"sr-only",3,"uploader"],["upload",""],["aria-label","Upload progress",3,"value"],[1,"file-upload-progress-indicator"],["uxTabbableList","","direction","horizontal","class","file-upload-queue",4,"ngIf"],[1,"btn-container"],["type","button",1,"btn","button-primary",3,"disabled","click"],["type","button",1,"btn","button-secondary",3,"disabled","click"],["href","https://valor-software.com/ng2-file-upload/"],[3,"minimal"],["heading","HTML"],[3,"content"],["heading","TypeScript"],["uxTabbableList","","direction","horizontal",1,"file-upload-queue"],[4,"ngFor","ngForOf"],["uxTabbableListItem",""],["file",""],["uxFocusIndicator","","type","button","aria-label","Remove file",1,"file-upload-queue-remove",3,"tabIndex","click"],["name","close"]],template:function(n,s){if(1&n){const t=a.EpF();a.TgZ(0,"label",0),a.NdJ("fileOver",function(o){return s.fileOver=o})("keydown.enter",function(){return a.CHM(t),a.MAs(3).click()}),a._uU(1," Click here or Drag and Drop to upload files\n"),a.qZA(),a._UZ(2,"input",1,2),a._UZ(4,"ux-progress-bar",3),a.TgZ(5,"p",4),a._uU(6),a.qZA(),a.YNc(7,Q,2,1,"ul",5),a.TgZ(8,"div",6),a.TgZ(9,"button",7),a.NdJ("click",function(){return s.uploader.uploadAll()}),a._uU(10," Upload All "),a.qZA(),a.TgZ(11,"button",8),a.NdJ("click",function(){return s.uploader.cancelAll()}),a._uU(12," Cancel All "),a.qZA(),a.TgZ(13,"button",8),a.NdJ("click",function(){return s.uploader.clearQueue()}),a._uU(14," Clear All "),a.qZA(),a.qZA(),a._UZ(15,"hr"),a.TgZ(16,"blockquote"),a.TgZ(17,"p"),a.TgZ(18,"b"),a._uU(19,"Note:"),a.qZA(),a._uU(20," If you are using this component in your application, you will need to install "),a.TgZ(21,"strong"),a._uU(22,"ng2-file-upload"),a.qZA(),a._uU(23," manually. Refer to "),a.TgZ(24,"a",9),a._uU(25,"ng2-file-upload"),a.qZA(),a._uU(26," for complete documentation on this component. "),a.qZA(),a.TgZ(27,"p"),a._uU(28," Files will not be uploaded to the server by the demo control. Application teams must implement server code. "),a.qZA(),a.qZA(),a.TgZ(29,"p"),a._uU(30," The File Upload component provides an easy way to let users choose one or more files to upload. This can either allow users to show a file dialog to choose files or allow them to simply drag and drop files into an area on the page.\n"),a.qZA(),a.TgZ(31,"p"),a._uU(32," Refer to "),a.TgZ(33,"a",9),a._uU(34,"ng2-file-upload"),a.qZA(),a._uU(35," for complete documentation on this component.\n"),a.qZA(),a.TgZ(36,"p"),a._uU(37,"The following code can be used to create the example above:"),a.qZA(),a.TgZ(38,"ux-tabset",10),a.TgZ(39,"ux-tab",11),a._UZ(40,"uxd-snippet",12),a.qZA(),a.TgZ(41,"ux-tab",13),a._UZ(42,"uxd-snippet",12),a.qZA(),a.qZA()}2&n&&(a.ekj("file-upload-dropping",s.fileOver),a.Q6J("uploader",s.uploader),a.xp6(2),a.Q6J("uploader",s.uploader),a.xp6(2),a.Q6J("value",s.uploader.progress?s.uploader.progress:0),a.xp6(2),a.hij("",s.uploader.progress?s.uploader.progress:0,"%"),a.xp6(1),a.Q6J("ngIf",s.uploader.queue.length),a.xp6(2),a.Q6J("disabled",!s.uploader.getNotUploadedItems().length),a.xp6(2),a.Q6J("disabled",!s.uploader.isUploading),a.xp6(2),a.Q6J("disabled",!s.uploader.queue.length),a.xp6(25),a.Q6J("minimal",!1),a.xp6(2),a.Q6J("content",s.snippets.compiled.appHtml),a.xp6(2),a.Q6J("content",s.snippets.compiled.appTs))},directives:[E.N,I,T,M.R,c.O5,z.G,H.A,L.i,B.j,R.h,c.sg,N.t,J.o],encapsulation:2}),d=(0,D.__decorate)([(0,S.cG)("ComponentsFileUploadComponent")],d);const j=[d],G=[{path:"**",component:w.R,data:{category:F.N.resolveCategoryData(F.I.Components,"File Upload")}}];let Y=(()=>{class p{constructor(s,t){t.registerResolver(s,j)}}return p.\u0275fac=function(s){return new(s||p)(a.LFG(a._Vd),a.LFG(F.N))},p.\u0275mod=a.oAB({type:p}),p.\u0275inj=a.cJS({imports:[[f.rt,r.jKR,c.ez,O.N,q,r.QX1,r.q7U,g.Bz.forChild(G),r.f_l]]}),p})()}}]);